{"ast":null,"code":"import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchAllProducts = createAsyncThunk('products/fetchAll', async () => {\n  try {\n    const response = await axios.get(\"/api/products/getallproducts\");\n    return response.data;\n  } catch (err) {\n    throw err;\n  }\n});\nexport const fetchProductsById = createAsyncThunk(\"products/fetchById\", async (productbyid, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`/api/products/getproductbyid`, {\n      productbyid\n    });\n    return response.data;\n  } catch (err) {\n    console.log(err.response.data);\n    throw rejectWithValue(err.response.data);\n  }\n});\nexport const registerUser = createAsyncThunk(\"auth/registerUser\", async (user, {\n  rejectWithValue\n}) => {\n  try {\n    const token = await axios.post(`/api/user/register`, {\n      name: user.name,\n      email: user.email,\n      password: user.password\n    });\n    localStorage.setItem(\"token\", token.data);\n    return token.data;\n  } catch (err) {\n    throw rejectWithValue(err.response.data);\n  }\n});\nexport const loginUser = createAsyncThunk(\"auth/loginUser\", async (user, {\n  rejectWithValue\n}) => {\n  try {\n    const token = await axios.post(`/api/user/login`, {\n      email: user.email,\n      password: user.password\n    });\n    localStorage.setItem(\"token\", token.data);\n    return token.data;\n  } catch (err) {\n    throw rejectWithValue(err.response.data);\n  }\n});\nexport const searchProducts = createAsyncThunk('products/searchProducts', async (searchkey, {\n  rejectWithValue\n}) => {\n  var searchProducts;\n  try {\n    const response = await axios.get(\"/api/products/getallproducts\");\n    searchProducts = response.data;\n    if (searchkey) {\n      searchProducts = response.data.filter(product => {\n        return product.title.toLowerCase().includes(searchkey);\n      });\n      console.log(searchProducts);\n    }\n    return searchProducts;\n  } catch (err) {\n    throw rejectWithValue(err.response.data);\n  }\n});\nexport const sortProducts = createAsyncThunk('products/filterProducts', async (sortkey, {\n  rejectWithValue\n}) => {\n  var sortProducts;\n  try {\n    const response = await axios.get(\"/api/products/getallproducts\");\n    sortProducts = response.data;\n    if (sortkey != \"popular\") {\n      if (sortkey == \"htl\") {\n        sortProducts = response.data.sort((a, b) => {\n          return b.price - a.price;\n        });\n      }\n      elxe;\n      filterProducts = response.data.filter(product => {\n        return product.title.toLowerCase().includes(sortkey);\n      });\n    }\n    return response.data;\n  } catch (err) {\n    throw rejectWithValue(err.response.data);\n  }\n});\nexport const filterProducts = createAsyncThunk('products/filterProducts', async (sortkey, category, {\n  rejectWithValue\n}) => {\n  var filterProducts;\n  try {\n    const response = await axios.get(\"/api/products/getallproducts\");\n    if (sortkey) {\n      filterProducts = response.data.filter(product => {\n        return product.title.toLowerCase().includes(sortkey);\n      });\n    }\n    return response.data;\n  } catch (err) {\n    throw rejectWithValue(err.response.data);\n  }\n});","map":{"version":3,"names":["createAsyncThunk","axios","fetchAllProducts","response","get","data","err","fetchProductsById","productbyid","rejectWithValue","post","console","log","registerUser","user","token","name","email","password","localStorage","setItem","loginUser","searchProducts","searchkey","filter","product","title","toLowerCase","includes","sortProducts","sortkey","sort","a","b","price","elxe","filterProducts","category"],"sources":["/home/cl00807248/Desktop/mern-ecommerce/Client/src/Components/Redux/Actions/actions.js"],"sourcesContent":["import { createAsyncThunk} from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nexport const fetchAllProducts = createAsyncThunk(\n    'products/fetchAll',\n    async () => {\n        try {\n          const response = await axios.get(\"/api/products/getallproducts\");\n          return response.data;\n        } catch (err) {\n          throw err; \n        }\n      }\n  );\n\n\nexport const fetchProductsById = createAsyncThunk(\n    \"products/fetchById\",\n    async (productbyid,{rejectWithValue}) => {\n        try {\n            const response = await axios.post(`/api/products/getproductbyid`,{productbyid});\n            return response.data\n        }\n        catch (err) {\n          console.log(err.response.data)\n            throw rejectWithValue(err.response.data)\n        }\n    }\n)\nexport const registerUser = createAsyncThunk(\n  \"auth/registerUser\",\n  async (user,{rejectWithValue}) => {\n      try {\n          const token = await axios.post(`/api/user/register`,{\n            name:user.name,\n            email:user.email,\n            password:user.password\n          });\n          localStorage.setItem(\"token\",token.data)\n          return token.data\n      }\n      catch (err) {\n          throw rejectWithValue(err.response.data)\n      }\n  }\n)\nexport const loginUser = createAsyncThunk(\n  \"auth/loginUser\",\n  async (user,{rejectWithValue}) => {\n      try {\n          const token = await axios.post(`/api/user/login`,{\n            email:user.email,\n            password:user.password\n          });\n          localStorage.setItem(\"token\",token.data)\n          return token.data\n      }\n      catch (err) {\n          throw rejectWithValue(err.response.data)\n      }\n  }\n)\nexport const searchProducts = createAsyncThunk(\n  'products/searchProducts',\n  async (searchkey,{rejectWithValue}) => {\n    var searchProducts;\n      try {\n        const response = await axios.get(\"/api/products/getallproducts\");\n        searchProducts= response.data\n        if(searchkey) {\n          searchProducts = response.data.filter(product =>{return product.title.toLowerCase().includes(searchkey)})\n          console.log(searchProducts)\n        }\n         return searchProducts;\n      } catch (err) {\n        throw rejectWithValue(err.response.data); \n      }\n    }\n);\nexport const sortProducts = createAsyncThunk(\n  'products/filterProducts',\n  async (sortkey,{rejectWithValue}) => {\n    var sortProducts;\n      try {\n        const response = await axios.get(\"/api/products/getallproducts\");\n        sortProducts= response.data\n        if(sortkey != \"popular\") {\n          if(sortkey == \"htl\"){\n            sortProducts = response.data.sort((a,b)=> {return b.price - a.price})\n          }elxe\n          filterProducts = response.data.filter(product =>{return product.title.toLowerCase().includes(sortkey)})\n        }\n        return response.data;\n      } catch (err) {\n        throw rejectWithValue(err.response.data); \n      }\n    }\n);\nexport const filterProducts = createAsyncThunk(\n  'products/filterProducts',\n  async (sortkey,category,{rejectWithValue}) => {\n    var filterProducts;\n      try {\n        const response = await axios.get(\"/api/products/getallproducts\");\n        if(sortkey) {\n          filterProducts = response.data.filter(product =>{return product.title.toLowerCase().includes(sortkey)})\n        }\n        return response.data;\n      } catch (err) {\n        throw rejectWithValue(err.response.data); \n      }\n    }\n);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}